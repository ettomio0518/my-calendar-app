<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¹´é½¢è¨ˆç®—</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #ffffcc;
        }
        .container {
            max-width: 500px;
            margin: 0 auto;
            padding: 20px;
            border: 1px solid #ccc;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            background-color: #cbe4e4;
        }
        body {
            font-family: Arial, sans-serif;
            font-size: 15px;
            margin: 7px;
            background-color: #ffffc4;
        }
		header {
		  background: #55aaaa;
		  color: white;
		  padding: 1em 0; /* ä¸Šä¸‹ã®ä½™ç™½ã‚’ã‚‚ã†å°‘ã—ã ã‘èª¿æ•´ */
		  text-align: center;
		  position: relative;
		}
		h1 {
		  font-size: 20px;
		  margin: 0;
		}    	            

        label, p {
            font-size: 16px;
        }
        input[type="text"], select, button {
            font-size: 16px;
            padding: 10px;
            margin: 10px 0;
            width: 100%;
            box-sizing: border-box;
        }

        .result {
            margin-top: 20px;
            font-size: 18px;
            font-weight: bold;
            text-align: center;
        }
        
        .calc-button {
            color: blue; /* è¨ˆç®—ãƒœã‚¿ãƒ³ã®æ–‡å­—è‰²ã‚’é’è‰²ã«è¨­å®š */
            font-weight:bold;
            border: 1px solid #8000ff;            
            background-color: #ccffff;                         
        }
               
	    /* æˆ»ã‚‹ãƒœã‚¿ãƒ³ 5/6 */
	    .top-right-button {
          width: auto; /* ãƒœã‚¿ãƒ³ã®å¹…ã‚’è‡ªå‹•èª¿æ•´ */
	      position: absolute;
	      top: 2px;
	      right: 10px;
	      background-color: #ccffff;
	      color: black;
	      border-radius: 20px;
	      padding: 6px 12px;
	      font-size: 14px;
    	  border: 1px solid black; /* æ ç·šã‚’è¡¨ç¤º */	      
	      cursor: pointer;
	    }
	    .top-right-button:hover {
	      background-color: #f4f4f4;
	    }
	                   
    </style>

</head>

<body>
  	<header>
    <!-- Homeã«æˆ»ã‚‹ãƒœã‚¿ãƒ³ 5/6 -->
	    <button class="top-right-button" onclick="location.href='index.html'">æˆ»ã‚‹</button>
	    <h1>ğŸ‚  å¹´é½¢è¨ˆç®—</h1>
  	</header>

    <div class="container">
        <label for="westernDate">èª•ç”Ÿæ—¥ï¼ˆè¥¿æš¦: YYYY/MM/DDï¼‰:</label>
        <input type="text" id="westernDate" placeholder="ä¾‹: 2000/01/01">

        <label>ã¾ãŸã¯ å’Œæš¦:</label>
        <label for="era">å…ƒå·ã‚’é¸æŠã—ã¦ãã ã•ã„:</label>
        <select id="era">
            <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
            <option value="æ˜­å’Œ">æ˜­å’Œ</option>
            <option value="å¹³æˆ">å¹³æˆ</option>
            <option value="ä»¤å’Œ">ä»¤å’Œ</option>
        </select>
        <label for="japaneseDate">æ—¥æœ¬ã®æ—¥ä»˜ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ (ä¾‹: 45/01/01):</label>
        <input type="text" id="japaneseDate" placeholder="ä¾‹: 45/01/01">

        <button class="calc-button" onclick="calculateAge()">è¨ˆç®—</button>
        <button onclick="clearFields()">æ¶ˆå»</button>

        <div id="result" class="result"></div>
    </div>
    
    <script>
        // ãƒšãƒ¼ã‚¸ãƒ­ãƒ¼ãƒ‰æ™‚ã«ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚’è¨­å®š
        document.addEventListener('DOMContentLoaded', () => {
            const goButton = document.getElementById('goButton');
        });

        function calculateAge() {
            let birthDate;
            const westernDate = document.getElementById("westernDate").value;
            const era = document.getElementById("era").value;
            const japaneseDate = document.getElementById("japaneseDate").value;

            if (westernDate) {
                // è¥¿æš¦ã‚’ä½¿ç”¨
                birthDate = new Date(westernDate);
            } else if (era && japaneseDate) {
                // å’Œæš¦ã‚’ä½¿ç”¨
                const [year, month, day] = japaneseDate.split("/").map(Number);
                const eraOffset = { "æ˜­å’Œ": 1925, "å¹³æˆ": 1988, "ä»¤å’Œ": 2018 }[era];
                birthDate = new Date(eraOffset + year, month - 1, day);
            } else {
                alert("æ­£ã—ã„æ—¥ä»˜ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„");
                return;
            }

            if (isNaN(birthDate)) {
                alert("æ—¥ä»˜å½¢å¼ãŒä¸æ­£ã§ã™");
                return;
            }

            const today = new Date();
            let ageYears = today.getFullYear() - birthDate.getFullYear();
            let ageMonths = today.getMonth() - birthDate.getMonth();
            let ageDays = today.getDate() - birthDate.getDate();

            if (ageDays < 0) {
                ageMonths--;
                const lastMonth = new Date(today.getFullYear(), today.getMonth(), 0);
                ageDays += lastMonth.getDate();
            }
            if (ageMonths < 0) {
                ageYears--;
                ageMonths += 12;
            }

            document.getElementById("result").innerText = `ç¾åœ¨ ${ageYears}æ­³ ${ageMonths}ãƒ¶æœˆ ${ageDays}æ—¥`;

            // èª•ç”Ÿæ—¥ãƒã‚§ãƒƒã‚¯
            if (ageYears >= 0 && ageMonths === 0 && ageDays === 0) {
                alert("ãŠèª•ç”Ÿæ—¥ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ã€‚ãƒ“ãƒ¼ãƒˆãƒ«ã‚ºã®ãƒãƒ¼ã‚¹ãƒ‡ã‚£ã‚’è´ˆã‚Šã¾ã™ã€‚");
                nativeSpeak("Happy Birthday to you.");
                setTimeout(navigate, 1500); // å°‘ã—å¾…ã£ã¦ã‹ã‚‰é·ç§»
            }
        }

        function clearFields() {
            document.getElementById('westernDate').value = '';
            document.getElementById('era').value = '';
            document.getElementById('japaneseDate').value = '';
            document.getElementById('result').innerText = '';
        }

		// æ—¢å­˜ã®éŸ³å£°å†ç”Ÿé–¢æ•°
		function speakText(text) {
		   if ('speechSynthesis' in window) {
		       const utterance = new SpeechSynthesisUtterance(text);
		       window.speechSynthesis.speak(utterance);
		   } else {
		       alert("éŸ³å£°åˆæˆãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã›ã‚“");
		   }
		}

		// æ–°ã—ã„éŸ³å£°åˆæˆé–¢æ•°
		function nativeSpeak(text) {
		   if (typeof Android !== 'undefined' && Android.speak) {
		       Android.speak(text);
		   } else {
		       speakText(text); // Android.speakãŒä½¿ç”¨ã§ããªã„å ´åˆã¯ãƒ–ãƒ©ã‚¦ã‚¶ã®éŸ³å£°åˆæˆã‚’ä½¿ç”¨
		   }
		}


        // YouTubeã¸é·ç§»ã™ã‚‹é–¢æ•°
        function navigate() {
            window.location.href = "https://www.youtube.com/watch?v=zGwtwBJDBDA";
        }
    </script>
        
</body>
</html>

