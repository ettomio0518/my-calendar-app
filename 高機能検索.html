<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é«˜æ©Ÿèƒ½æ¤œç´¢</title>
    <link rel="stylesheet" href="styles.css">
    
	<style>   
	/* åŸºæœ¬ã®ã‚¹ã‚¿ã‚¤ãƒ« */
	body {
	    font-family: Arial, sans-serif;
	    font-size: 15px;
	    margin: 7px;
	    background-color: #ffffc4;
	}

	.container {
	    display: flex;
	    flex-direction: column;
	    align-items: center;
	    padding: 20px;
	    max-width: 600px;
	    margin: auto;
	    background-color: #e1e1ff;
	}

	header {
	  background:  #6c6cff;
	  color: white;
	  padding: 1em 0; /* ä¸Šä¸‹ã®ä½™ç™½ã‚’ã‚‚ã†å°‘ã—ã ã‘èª¿æ•´ */
	  text-align: center;
	  position: relative;
	}
	h1 {
	  font-size: 20px;
	  margin: 0;
	}    	            

	/* å…¥åŠ›ãƒœãƒƒã‚¯ã‚¹ */
	input[type="text"] {
	    all: unset;
	    display: block;
	    width: 100%;
	    height: 40px;
	    font-size: 16px;
	    box-sizing: border-box;
	    background-color: #ffffff; /* èƒŒæ™¯ã‚’ç™½ */
	    color: #000000; /* æ–‡å­—è‰²ã‚’é»’ */
	    border: 1px solid #0000ff; /* é’ã„æ ç·š */
	    padding: 5px; /* å†…å´ã®ä½™ç™½ */
	    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2); /* è»½ã„å½± */
	}

	input[type="text"]:focus {
	    border-color: #ff0000; /* ãƒ•ã‚©ãƒ¼ã‚«ã‚¹æ™‚ã«èµ¤ã„æ ç·š */
	    outline: none; /* ã‚¢ã‚¦ãƒˆãƒ©ã‚¤ãƒ³å‰Šé™¤ */
	}

	/* ãƒ†ãƒ¼ãƒ–ãƒ«ã®ã‚¹ã‚¿ã‚¤ãƒ« */
	.table-container {
	    width: 100%;
	    overflow-x: auto;
	    margin-top: 20px;
	}

	table {
	    width: 100%;
	    border-collapse: collapse;
	}

	th, td {
	    border: 1px solid #ddd;
	    padding: 8px;
	    text-align: left;
	    word-wrap: break-word;
	    white-space: pre-wrap;
	}

	th.keyword-column, td.keyword-column {
	    width: 20%;
	    max-width: 6ch; /* ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã®æ–‡å­—æ•°åˆ¶é™ */
	}

	th.content-column, td.content-column {
	    width: 60%;
	    max-width: 10ch; /* å†…å®¹ã®æ–‡å­—æ•°åˆ¶é™ */
	}

	th.actions-column, td.actions-column {
	    width: 20%;
	    text-align: center;	   
	}

	td.actions-column button {
	    display: inline-block; /* ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ãƒ–ãƒ­ãƒƒã‚¯ã§ä¸­å¤®å¯„ã› */
	}
	
	/* è©³ç´°è¡¨ç¤º */
	#fullContent {
	    width: 100%;
	    border: 1px solid #ddd;
	    padding: 10px;
	    margin-top: 20px;
	    background-color: #ffffff; /* èƒŒæ™¯ã‚’ç™½ */
	    white-space: pre-wrap;
	}

	/* ãƒœã‚¿ãƒ³ */
	button {
	    font-size: 14px;
	    padding: 5px 10px;
	    margin: 5px;
	    border-radius: 5px;
	    background-color: #ffd5ea;
	    color: black;
	    border: 1px solid #0000ff;
	    cursor: pointer;
	}

	
	.closeButton {
	    font-size: 16px;
	    padding: 5px 10px;
	    margin: 5px;
	    border-radius: 5px;
	    background-color: #c4ffc4;
	    color: black;
	    border: 1px solid #0000ff;
	    cursor: pointer;
	}
    .btn-show-text {  /* 3/15ã«è¿½åŠ  */
        font-size: 14px;
        padding: 0px 2px;
        padding: 3px 5px; /* ãƒœã‚¿ãƒ³ã®ä½™ç™½ã‚’èª¿æ•´ */
        background-color: #b9ffff;
        color: black;
        border: 1px solid #0000ff;
        border-radius: 5px;            
        cursor: pointer;
        min-width: 60px;   /* æœ€å°å¹…ã‚’è¨­å®š */
        display: inline-block; /* æ¨ªä¸¦ã³ã«ã™ã‚‹ */
    }
	/* è©³ç´°ã‚³ãƒ³ãƒ†ãƒŠ */
	.detail-container {
	    background-color: #f2f2f2;
	    word-break: break-all;
	}

	button, a {
	    cursor: pointer; /* ã‚«ãƒ¼ã‚½ãƒ«ã‚’æ‰‹ã®å½¢ã« */
	}
	#saveButton, #closeButton {
	    cursor: pointer; /* ã‚«ãƒ¼ã‚½ãƒ«ã‚’æ‰‹ã®å½¢ã« */
	}


	/* ãƒ¡ãƒ‡ã‚£ã‚¢ã‚¯ã‚¨ãƒªã«ã‚ˆã‚‹ã‚¹ãƒãƒ›å¯¾å¿œ */
	@media only screen and (max-width: 600px) {
	    td.keyword-column {
	        max-width: 6ch; /* ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰åˆ—ã®å¹…åˆ¶é™ */
	    }
	    td.content-column {
	        max-width: 10ch; /* å†…å®¹åˆ—ã®å¹…åˆ¶é™ */
	    }
	    table, th, td {
	        font-size: 16px; /* ãƒ†ã‚­ã‚¹ãƒˆã‚µã‚¤ã‚ºèª¿æ•´ */
	    }
	    #keywordInput {
	        height: 30px; /* ã‚¹ãƒãƒ›ç”¨ã®é«˜ã• */
	    }
	}
	
    #topButton {
        margin-top: 20px; /* ä¸Šã¨ã®ä½™ç™½ */
        justify-content: center; /* æ°´å¹³æ–¹å‘ã®ä¸­å¤®æƒãˆ */        
        padding: 10px 20px;
        background-color: #007bff;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-size: 16px;
    }
    #topButton:hover {
        background-color: #0056b3;
    }	
    
    /* Topãƒœã‚¿ãƒ³ï¼šæœ€åˆã¯éè¡¨ç¤ºã«ã—ã¦ãŠãã€ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã§è¡¨ç¤º 5/5 */
    .top-button {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: #007bff;
      color: white;
      border: none;
      border-radius: 20px;
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
      box-shadow: 0 2px 5px rgba(0,0,0,0.2);
      z-index: 9999;
      display: none; /* æœ€åˆã¯éè¡¨ç¤º */
    }
    .top-button:hover {
      background: #0056b3;
    }

    /* æˆ»ã‚‹ãƒœã‚¿ãƒ³ 5/6 */
    .top-right-button {
      width: auto; /* ãƒœã‚¿ãƒ³ã®å¹…ã‚’è‡ªå‹•èª¿æ•´ */
      position: absolute;
      top: 5px;
      right: 10px;
      background-color: #00bf00;
      color: #ffffff;
      border-radius: 20px;
      padding: 6px 12px;
      font-size: 14px;
	  border: 1px solid black; /* æ ç·šã‚’è¡¨ç¤º */	      
      cursor: pointer;
    }
    .top-right-button:hover {
      background-color: #cae4ff;
    }

	/* 8/11 è¿½åŠ  */	
	#voiceButton {
	    color: #4d0000;
	    background-color: #c8ffe3;
	    border-radius: 5px;
	    border: 1px solid #0000ff;
	}

	@keyframes blink {
	  0% { opacity: 1; }
	  50% { opacity: 0.3; }
	  100% { opacity: 1; }
	}

	.blinking {
	  animation: blink 1s infinite;
	}

	#voiceButton.recording {
	    color: red !important;
	    background-color: #ffd0d0 !important;
	}

	/* ã‚«ã‚¹ã‚¿ãƒ ã‚¢ãƒ©ãƒ¼ãƒˆ */
	.custom-alert { 
	    position: fixed; 
	    top: 20px; 
	    left: 50%; 
	    transform: translateX(-50%); 
	    background-color: #333; 
	    color: white; 
	    padding: 15px 25px; 
	    border-radius: 5px; 
	    box-shadow: 0 2px 10px rgba(0,0,0,0.2); 
	    z-index: 1000; 
	    font-size: 1em; 
	}

	/* ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ï¼ˆãƒ€ã‚¤ã‚¢ãƒ­ã‚°ï¼‰ã®åŸºæœ¬ã‚¹ã‚¿ã‚¤ãƒ« 10/22 Gemini */
	.modal {
	    display: none; /* åˆæœŸçŠ¶æ…‹ã§ã¯éè¡¨ç¤º */
	    position: fixed;
	    z-index: 1000; /* ä»–ã®è¦ç´ ã‚ˆã‚Šæ‰‹å‰ã«è¡¨ç¤º */
	    left: 0;
	    top: 0;
	    width: 100%;
	    height: 100%;
	    overflow: auto;
	    background-color: rgba(0,0,0,0.4); /* èƒŒæ™¯ã‚’æš—ãã™ã‚‹ */
	}

	/* ãƒ¢ãƒ¼ãƒ€ãƒ«ã®ä¸­èº« */
	.modal-content {
	    background-color: #fefefe;
	    margin: 15% auto; /* ç”»é¢ä¸­å¤®ã«é…ç½® */
	    padding: 20px;
	    border: 1px solid #888;
	    width: 80%;
	    max-width: 400px;
	    border-radius: 8px;
	    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
	    text-align: center;
	}

	/* å€™è£œãƒœã‚¿ãƒ³ã®ã‚³ãƒ³ãƒ†ãƒŠ */
	#alternativeButtons {
	    margin: 15px 0;
	}

	/* å€™è£œãƒœã‚¿ãƒ³ã®ã‚¹ã‚¿ã‚¤ãƒ« */
	#alternativeButtons button {
	    display: block; /* ç¸¦ã«ä¸¦ã¹ã‚‹ */
	    width: 100%;
	    padding: 10px;
	    margin-bottom: 8px;
	    border: 1px solid #ccc;
	    background-color: #e9e9e9;
	    cursor: pointer;
	    font-size: 16px;
	    border-radius: 4px;
	    transition: background-color 0.2s;
	}

	#alternativeButtons button:hover {
	    background-color: #d1d1d1;
	}

	/* ã‚­ãƒ£ãƒ³ã‚»ãƒ«ãƒœã‚¿ãƒ³ã®ã‚¹ã‚¿ã‚¤ãƒ« */
	#closeModalButton {
	    background-color: #f8887e;
	    color: white;
	    padding: 10px 20px;
	    border: none;
	    border-radius: 4px;
	    cursor: pointer;
	    font-size: 16px;
	    margin-top: 10px;
	}
			
	</style>
	
</head>

<body>
  	<header>
    <!-- Homeã«æˆ»ã‚‹ãƒœã‚¿ãƒ³ 5/6 -->
	    <button class="top-right-button" onclick="location.href='index.html'">æˆ»ã‚‹</button>
	    <h1>é«˜æ©Ÿèƒ½æ¤œç´¢</h1>
  	</header>
  	
    <div class="container">

        <!-- ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰å…¥åŠ›ãƒœãƒƒã‚¯ã‚¹ -->
        <div>
            <label for="keywordInput">ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰:</label>
            <!-- éŸ³å£°å…¥åŠ›ãƒœã‚¿ãƒ³ -->
<button id="voiceButton" onclick="startVoiceInput()">ğŸ¤ éŸ³å£°å…¥åŠ›</button>
            <input type="text" id="keywordInput" oninput="searchMemos()" placeholder="æ¤œç´¢ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›">
        </div>

        <!-- æ¤œç´¢çµæœè¡¨ç¤º -->
        <div id="searchResults" class="table-container"></div>

        <!-- è©³ç´°è¡¨ç¤ºã‚¨ãƒªã‚¢ -->
        <div id="fullContent" class="detail-container" contenteditable="true"></div>
        <button id="saveButton" style="display: none;" onclick="saveChanges()">ä¿®æ­£ã—ã¦ä¿å­˜</button>
        <button id="closeButton" class="closeButton" style="display: none;" onclick="closeFullContent()">è©³ç´°ã‚’é–‰ã˜ã‚‹</button>


    <script>
	// 8/10,8/11 8/13è¿½åŠ ã€€CoPilot 10/22 Gemini
	// â˜…â˜…â˜… å¤‰æ•°å®£è¨€ã‚’ã“ã“ã«çµ±ä¸€ã—ã€é‡è¤‡ã‚’è§£æ¶ˆã—ã¾ã™ â˜…â˜…â˜…
	let recognition = null;
	let isListening = false;
	let currentKey = null; // ç¾åœ¨è¡¨ç¤ºã—ã¦ã„ã‚‹keyã‚’ä¿æŒ

	// ã‚«ã‚¹ã‚¿ãƒ é€šçŸ¥ã‚’è¡¨ç¤ºã™ã‚‹é–¢æ•°
	function showCustomAlert(message) {
	    const alertContainer = document.createElement('div');
	    alertContainer.className = 'custom-alert';
	    alertContainer.textContent = message;

	    document.body.appendChild(alertContainer);

	    setTimeout(() => {
	        document.body.removeChild(alertContainer);
	    }, 2000);
	}

	// éŸ³å£°å…¥åŠ›ã‚’é–‹å§‹ã™ã‚‹é–¢æ•°
	function startVoiceInput() {
	    const voiceButton = document.getElementById('voiceButton');

	    // èªè­˜ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒã¾ã ä½œæˆã•ã‚Œã¦ã„ãªã„å ´åˆã«åˆæœŸåŒ–
	    if (!recognition) {
	        if ('webkitSpeechRecognition' in window) {
	            recognition = new webkitSpeechRecognition();
	        } else if ('SpeechRecognition' in window) {
	            recognition = new SpeechRecognition();
	        } else {
	            recognition = null;
	            voiceButton.style.display = "none";
	            showCustomAlert('ã“ã®ç«¯æœ«ã§ã¯éŸ³å£°å…¥åŠ›ãŒä½¿ãˆã¾ã›ã‚“ã€‚æ‰‹å‹•å…¥åŠ›ã‚’ã”åˆ©ç”¨ãã ã•ã„ã€‚');
	            return;
	        }

recognition.lang = 'ja-JP';
        recognition.interimResults = false;
        
        // æœ€å¤§3ã¤ã®å€™è£œã‚’å–å¾—ã™ã‚‹ã‚ˆã†ã«è¨­å®š
        recognition.maxAlternatives = 3; 

        // çµæœã‚¤ãƒ™ãƒ³ãƒˆã®ãƒãƒ³ãƒ‰ãƒ©
        recognition.onresult = function(event) {
            const result = event.results[0];
            const alternativesContainer = document.getElementById('alternativeButtons');
            alternativesContainer.innerHTML = ''; // ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªã‚¢

            // å–å¾—ã—ãŸå…¨ã¦ã®å€™è£œï¼ˆæœ€å¤§3ã¤ï¼‰ã‚’ãƒœã‚¿ãƒ³ã¨ã—ã¦ä½œæˆ
            for (let i = 0; i < result.length; i++) {
                const transcript = result[i].transcript;
                const button = document.createElement('button');
                button.textContent = transcript;
                
                // ãƒœã‚¿ãƒ³ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸã¨ãã®å‡¦ç†ã‚’è¨­å®š
                button.onclick = () => selectAlternative(transcript);
                
                alternativesContainer.appendChild(button);
            }

            // å€™è£œãŒä¸€ã¤ã‚‚ãªã‹ã£ãŸå ´åˆï¼ˆç¨€ï¼‰ã¯ã‚¨ãƒ©ãƒ¼æ‰±ã„
            if (result.length === 0) {
                 recognition.onerror({ error: 'no-speech' });
                 return;
            }
            
            // â˜…ä¿®æ­£ç‚¹: ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚’è¡¨ç¤ºã™ã‚‹â˜…
            document.getElementById('alternativesModal').style.display = 'block';

            // èªè­˜ãŒå®Œäº†ã—ãŸã®ã§ã€ãƒœã‚¿ãƒ³ã®ç‚¹æ»…ã‚’è§£é™¤
            toggleVoiceButton(false);
            isListening = false;
        };

	        recognition.onerror = function(event) {
	            alert('éŸ³å£°èªè­˜ã‚¨ãƒ©ãƒ¼: ' + event.error);
	            showCustomAlert('ã“ã®ç«¯æœ«ã§ã¯éŸ³å£°å…¥åŠ›ãŒä½¿ãˆã¾ã›ã‚“ã€‚iPhoneã§Webç‰ˆã‚’ã”åˆ©ç”¨ã®å ´åˆã¯ã€Safari 14.1ä»¥é™ã§ç›´æ¥é–‹ã„ã¦ãã ã•ã„ã€‚');
	            voiceButton.style.display = "none";
	            toggleVoiceButton(false); // ã‚¨ãƒ©ãƒ¼æ™‚ã‚‚ãƒœã‚¿ãƒ³ã‚’ãƒªã‚»ãƒƒãƒˆ
	        };
	        
	        // èªè­˜çµ‚äº†æ™‚ã®å‡¦ç†ã‚’ãƒªã‚»ãƒƒãƒˆ
	        recognition.onend = function() {
	            isListening = false;
	            voiceButton.classList.remove("blinking");
	            voiceButton.classList.remove("recording");
	        };
	    }

	    // èªè­˜é–‹å§‹
	    if (!isListening) { // é‡è¤‡ã‚¹ã‚¿ãƒ¼ãƒˆé˜²æ­¢
	        recognition.start();
	        isListening = true;

	        voiceButton.classList.add("blinking");
	        voiceButton.classList.add("recording");
	    }
	}

	// ãƒœã‚¿ãƒ³è¡¨ç¤ºã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹é–¢æ•°
	function toggleVoiceButton(isClearMode) {
	    const voiceButton = document.getElementById('voiceButton');
	    if (isClearMode) {
	        voiceButton.textContent = 'âŒ ã‚¯ãƒªã‚¢';
	        voiceButton.onclick = clearVoiceInput;
	        voiceButton.classList.remove("blinking");
	        voiceButton.classList.remove("recording");
	    } else {
	        voiceButton.textContent = 'ğŸ¤ éŸ³å£°å…¥åŠ›';
	        voiceButton.onclick = startVoiceInput;
	        voiceButton.classList.remove("blinking");
	        voiceButton.classList.remove("recording");
	    }
	}

	// ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’ã‚¯ãƒªã‚¢ã—ã¦å…¨ãƒªã‚¹ãƒˆè¡¨ç¤ºã«æˆ»ã™é–¢æ•°
	function clearVoiceInput() {
	    document.getElementById('keywordInput').value = '';
	    searchMemos();
	    toggleVoiceButton(false); // ã€ŒéŸ³å£°å…¥åŠ›ã€ãƒœã‚¿ãƒ³ã«æˆ»ã™
	}

	// ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå€™è£œã‚’é¸æŠã—ãŸã¨ãã®å‡¦ç† 10/22
	function selectAlternative(transcript) {
	    // é¸æŠã•ã‚ŒãŸå€™è£œã‚’å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«åæ˜ 
	    document.getElementById('keywordInput').value = transcript;
	    
	    // ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚’é–‰ã˜ã‚‹
	    document.getElementById('alternativesModal').style.display = 'none';

	    // æ¤œç´¢å‡¦ç†ã‚’å®Ÿè¡Œ
	    searchMemos();
	    
	    // ã€ŒâŒ ã‚¯ãƒªã‚¢ã€ãƒœã‚¿ãƒ³ã«åˆ‡ã‚Šæ›¿ãˆ
	    toggleVoiceButton(true); 
	}

	// ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã®ã‚­ãƒ£ãƒ³ã‚»ãƒ«ãƒœã‚¿ãƒ³ã®å‡¦ç†
	function closeAlternativesModal() {
	    document.getElementById('alternativesModal').style.display = 'none';
	    // ã‚­ãƒ£ãƒ³ã‚»ãƒ«æ™‚ã¯å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®å€¤ã‚’ã‚¯ãƒªã‚¢ï¼ˆã¾ãŸã¯å…ƒã®å€¤ã«æˆ»ã™ï¼‰ã™ã‚‹ãªã©ã®å‡¦ç†ã‚‚æ¤œè¨
	}

	// DOMèª­ã¿è¾¼ã¿å¾Œã®åˆæœŸåŒ–å‡¦ç†ã«ã€ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹ã‚¤ãƒ™ãƒ³ãƒˆã‚’è¨­å®š
	document.addEventListener('DOMContentLoaded', function () {
	    // ... (æ—¢å­˜ã®DOMContentLoadedãƒ­ã‚¸ãƒƒã‚¯)

	    // ãƒ¢ãƒ¼ãƒ€ãƒ«ã®ã‚­ãƒ£ãƒ³ã‚»ãƒ«ãƒœã‚¿ãƒ³ã«å‡¦ç†ã‚’å‰²ã‚Šå½“ã¦ã‚‹
	    document.getElementById('closeModalButton').onclick = closeAlternativesModal;
	    
	    // ... (æ—¢å­˜ã®DOMContentLoadedãƒ­ã‚¸ãƒƒã‚¯ã®ç¶šã)
	});

	// URLã‚’ãƒªãƒ³ã‚¯ã«å¤‰æ›ã™ã‚‹é–¢æ•°
	function makeUrlsClickable(text) {
	    const urlPattern = /(https?:\/\/[^\s]+)/g;
	    return text.replace(urlPattern, '<a href="$1" target="_blank" rel="noopener noreferrer">$1</a>');
	}

	// è©³ç´°ã‚’è¡¨ç¤ºã™ã‚‹é–¢æ•°
	function displayFullContent(content, key) {
	    const fullContentDiv = document.getElementById('fullContent');
	    const saveButton = document.getElementById('saveButton');
	    const closeButton = document.getElementById('closeButton');

	    currentKey = key; // ç¾åœ¨ã®ã‚­ãƒ¼ã‚’ä¿å­˜
	    fullContentDiv.innerHTML = makeUrlsClickable(content); // ã‚¯ãƒªãƒƒã‚«ãƒ–ãƒ«URLã‚’é©ç”¨
	    fullContentDiv.contentEditable = true; // ç·¨é›†å¯èƒ½ã«è¨­å®š
	    fullContentDiv.style.display = 'block';
	    saveButton.style.display = 'block';
	    closeButton.style.display = 'block';
	    fullContentDiv.scrollIntoView({ behavior: 'smooth' });

	    // contenteditableå†…ã§ã®ãƒªãƒ³ã‚¯ã‚¯ãƒªãƒƒã‚¯ã‚’æœ‰åŠ¹åŒ–
	    fullContentDiv.addEventListener('click', (e) => {
	        if (e.target.tagName === 'A') {
	            e.preventDefault();
	            window.open(e.target.href, '_blank', 'noopener,noreferrer'); // æ–°ã—ã„ã‚¿ãƒ–ã§é–‹ã
	        }
	    });
	}

	// è©³ç´°ã‚’é–‰ã˜ã‚‹é–¢æ•°
	function closeFullContent() {
	    const fullContentDiv = document.getElementById('fullContent');
	    const saveButton = document.getElementById('saveButton');
	    const closeButton = document.getElementById('closeButton');

	    fullContentDiv.style.display = 'none';
	    saveButton.style.display = 'none';
	    closeButton.style.display = 'none';
	    currentKey = null; // ç¾åœ¨ã®keyã‚’ãƒªã‚»ãƒƒãƒˆ
	    scrollToTop() // Topã«æˆ»ã‚‹
	}

	// ä¿®æ­£å†…å®¹ã‚’ä¿å­˜ã™ã‚‹é–¢æ•°
	function saveChanges() {
	    const fullContentDiv = document.getElementById('fullContent');
	    const newContent = fullContentDiv.innerText; // ä¿®æ­£å¾Œã®å†…å®¹ã‚’å–å¾—ï¼ˆãƒ—ãƒ¬ãƒ¼ãƒ³ãƒ†ã‚­ã‚¹ãƒˆï¼‰

	    if (currentKey) {
	        localStorage.setItem(currentKey, newContent); // ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«ä¿å­˜
	        alert('å†…å®¹ã‚’ä¿å­˜ã—ã¾ã—ãŸï¼');
	        searchMemos(); // æ¤œç´¢çµæœã‚’æ›´æ–°
	    } else {
	        alert('ä¿å­˜ã™ã‚‹å†…å®¹ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚');
	    }
	}

	// ãƒ¡ãƒ¢ã®æ¤œç´¢ã¨è¡¨ç¤ºã‚’è¡Œã†é–¢æ•°
	function searchMemos() {
	    const keyword = document.getElementById('keywordInput').value;
	    const keys = Object.keys(localStorage).filter(key => key !== 'searchKeyword');
	    const searchResults = keys.filter(key => {
	        const content = localStorage.getItem(key);
	        return content.includes(keyword); // ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
	    });

	    searchResults.sort((a, b) => a.localeCompare(b));

	    const searchResultsList = document.getElementById('searchResults');
	    searchResultsList.innerHTML = '';

	    const table = document.createElement('table');
	    const headerRow = document.createElement('tr');
	    const keywordHeader = document.createElement('th');
	    keywordHeader.classList.add('keyword-column');
	    keywordHeader.textContent = 'key';
	    const contentHeader = document.createElement('th');
	    contentHeader.classList.add('content-column');
	    contentHeader.textContent = 'å†…å®¹';
	    const actionsHeader = document.createElement('th');
	    actionsHeader.classList.add('actions-column');
	    actionsHeader.textContent = 'æ“ä½œ';
	    headerRow.appendChild(keywordHeader);
	    headerRow.appendChild(contentHeader);
	    headerRow.appendChild(actionsHeader);
	    table.appendChild(headerRow);

	    searchResults.forEach(key => {
	        const row = document.createElement('tr');
	        const keywordCell = document.createElement('td');
	        keywordCell.classList.add('keyword-column');
	        const contentCell = document.createElement('td');
	        contentCell.classList.add('content-column');
	        const actionsCell = document.createElement('td');
	        actionsCell.classList.add('actions-column');
	        const content = localStorage.getItem(key);

	        keywordCell.textContent = key.slice(0, 10);
	        contentCell.textContent = content.slice(0, 30) + '...';

	        const viewButton = document.createElement('button');
	        viewButton.textContent = 'è¡¨ç¤º';
	        viewButton.classList.add('btn-show-text'); // ã‚¯ãƒ©ã‚¹ã‚’è¿½åŠ 
	        viewButton.onclick = () => displayFullContent(content, key);

	        actionsCell.appendChild(viewButton);
	        row.appendChild(keywordCell);
	        row.appendChild(contentCell);
	        row.appendChild(actionsCell);
	        table.appendChild(row);
	    });

	    searchResultsList.appendChild(table);
	}

	// DOMèª­ã¿è¾¼ã¿å¾Œã®åˆæœŸåŒ–
	document.addEventListener('DOMContentLoaded', function () {
	    const voiceButton = document.getElementById('voiceButton');
	    const keywordInput = document.getElementById('keywordInput');

	    if (!('webkitSpeechRecognition' in window || 'SpeechRecognition' in window)) {
	        voiceButton.style.display = "none";
	        showCustomAlert('ã“ã®ç«¯æœ«ã§ã¯éŸ³å£°å…¥åŠ›ãŒä½¿ãˆã¾ã›ã‚“ã€‚æ‰‹å‹•å…¥åŠ›ã‚’ã”åˆ©ç”¨ãã ã•ã„ã€‚');
	    } else {
	        voiceButton.onclick = startVoiceInput;
	        toggleVoiceButton(false);
	    }

	    // æ‰‹å‹•å…¥åŠ›ãŒå§‹ã¾ã£ãŸã‚‰ã€ŒâŒ ã‚¯ãƒªã‚¢ã€ãƒœã‚¿ãƒ³ã«åˆ‡ã‚Šæ›¿ãˆ
	    keywordInput.addEventListener('input', function () {
	        if (this.value.trim() !== '') {
	            voiceButton.style.display = "inline-block";
	            toggleVoiceButton(true);
	        }
	    });
	    
	    // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«åˆæœŸåŒ–
	    searchMemos();
	});

	// Topã«æˆ»ã‚‹
	function scrollToTop() {
	    window.scrollTo({
	        top: 0,
	        behavior: 'smooth'
	    });
	}

	  </script>
	  
 	  
   	</div>

<div id="alternativesModal" class="modal">
    <div class="modal-content">
        <h2>èªè­˜å€™è£œã‚’é¸æŠã—ã¦ãã ã•ã„</h2>
        <div id="alternativeButtons">
            </div>
        <button id="closeModalButton">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
    </div>
</div>

   	
	<footer style="text-align: center;">
	<br>
	  Â© 20251022 ettomio
	</footer>
     	
	<!-- HTMLæœ«å°¾ã«ã“ã‚Œã‚’è¿½åŠ  5/5 -->
	<div style="height: 80px;"></div>
   	       
</body>
</html>
